# 经销商管理接口


# **接口预览**

1. [添加经销商](#addDealer)
2. [修改经销商](#modifyDealer)
3. [启/停用经销商](#disableDealer)
4. [删除经销商](#deleteDealer)
5. [获取经销商列表](#getDealerList)
6. [经销商登陆认证](#dealer_auth")
7. [经销商刷新凭证](#dealer_refresh_token)
8. [经销商获取设备列表](#search_device_list)
9. [经销商详细信息](#get_dealer)
10. [通过经销商代码获取经销商信息](#get_dealer_by_code)


# **接口详情**


### **<a name="addDealer">1. 添加一个经销商</a>**



#### Request ####

*URL*

	POST /v2/dealer

*Header*

	Content-Type:"application/json"
	Access-Token:"Corp调用凭证"

*Content*
		
	{
		"name" : "经销商名称",
		"email" : "邮箱地址",
		"phone" : "手机",
		"password":"登录密码"，
		"address":"联系地址",
		"upper_dealer_code":"上级经销商代码"
	}

| 字段	| 是否必须 | 描述 |
| ----	| ----	| ---- |
| name | 是 | 经销商名称 |
| email | 是 |	邮箱地址|
| phone | 是 | 手机 |
| password | 是 | 登录密码，9-16位字符，必须同时包含大小写字母和数字。 |
| address | 否 | 联系地址 |
| upper_dealer_code | 否 | 上级经销商代码 |

#### Response ####

*Header*

	HTTP/1.1 200 OK

*Content*

	{
		"id":"经销商的id",
		"name" : "经销商名称",
		"email" : "邮箱地址",
		"phone" : "手机",
		"address":"联系地址",
		"status":"经销商状态",
		"dealer_code":"自身的经销商代码",
		"upper_dealer_code":"上级经销商代码",
		"create_time":"创建时间"
	}

	
| 字段	| 是否必须 | 描述 |
| ----	| ----	| ---- |
| id | 是 | 经销商的id |
| name | 是 | 经销商名称 |
| email | 是 |	邮箱地址|
| phone | 是 | 手机 |
| address | 是 | 联系地址 |
| status | 是 | 经销商的状态，详细参见附录[<经销商状态>](#dealerStatusType) |
| dealer_code | 是 | 自身的经销商代码 |
| upper_dealer_code | 是 | 上级经销商代码 |
| create_time | 是 | 经销商的创建时间 |

### **<a name="modifyDealer">2. 修改经销商</a>**

#### Request ####

*URL*

	PUT /v2/dealer/{dealer_id}

*Header*

	Content-Type:"application/json"
	Access-Token:"Corp调用凭证"

*Content*
		
	{
		"name" : "经销商名称",
		"address":"联系地址"
	}

| 字段	| 是否必须 | 描述 |
| ----	| ----	| ---- |
| name | 是 | 经销商名称 |
| address | 是 | 联系地址 |

#### Response ####

*Header*

	HTTP/1.1 200 OK

*Content*

	{
		"id":"经销商的id",
		"name" : "经销商名称",
		"email" : "邮箱地址",
		"phone" : "手机",
		"address":"联系地址",
		"status":"经销商状态",
		"dealer_code":"自身的经销商代码",
		"upper_dealer_code":"上级经销商代码",
		"create_time":"创建时间"
	}

	
| 字段	| 是否必须 | 描述 |
| ----	| ----	| ---- |
| id | 是 | 经销商的id |
| name | 是 | 经销商名称 |
| email | 是 |	邮箱地址|
| phone | 是 | 手机 |
| address | 是 | 联系地址 |
| status | 是 | 经销商的状态，详细参见附录[<经销商状态>](#dealerStatusType) |
| dealer_code | 是 | 自身的经销商代码 |
| upper_dealer_code | 是 | 上级经销商代码 |
| create_time | 是 | 经销商的创建时间 |


### **<a name="disableDealer">3. 启/停用经销商</a>**

*URL*

	PUT /v2/dealer/{dealer_id}/status/{status}

*Header*

	Content-Type:"application/json"
	Access-Token:"Corp调用凭证"

*Content*
		
	无

#### Response ####

*Header*

	HTTP/1.1 200 OK

*Content*

	无

### **<a name="deleteDealer">4. 删除经销商</a>**

*URL*

	DELETE /v2/dealer/{dealer_id}

*Header*

	Content-Type:"application/json"
	Access-Token:"Corp调用凭证"

*Content*
		
	无

#### Response ####

*Header*

	HTTP/1.1 200 OK

*Content*

	无

### **<a name="getDealerList">5. 获取经销商列表</a>**

#### Request ####

*URL*

	POST /v2/dealer_list

*Header*

	Content-Type:"application/json"
	Access-Token:"Corp调用凭证"

*Content*
		
	{
	    "offset": "请求列表的偏移量",
	    "limit": "请求数量",
	    "filter": [
	        "字段A",
	        "字段B"
	    ],
	    "query": {
	        "filed1": {
	            "$like": "字段值"
	        },
	        "filed3": {
	            "$lt": "字段值"
	        }
	    },
	    "order": {
	        "filed1": "desc",
	        "filed2": "asc"
	    }
	}

字段 | 是否必须 | 描述
---- | ---- | ----
offset | 否 | 从某个偏移量开始请求，默认为0
limit | 否 | 请求的条目数量，默认为10
order | 否 | 可以指定通过设备默认的某个字段排序，desc降序，asc升序
filter |否 | 字段过滤，集合类型，可以指定返回结果列表的字段，可以<br>包含扩展属性字段
query | 否 | 查询条件，可以根据不同字段加上不同的比较指令来查询，查<br>询条件字段包含设备所有默认字段，不支持扩展属性字段，支<br>持比较指令包含如下:<br>$in：包含于该列表任意一个值<br>$lt：小于该字段值<br>$lte：小于或等于字段值<br>$gt：大于该字段值<br>$gte：大于或等于该字段值<br>$like：模糊匹配该字段值

#### Response ####

*Header*

	HTTP/1.1 200 OK

*Content*

	{
    	"count":"实际返回的成员条目数量",
    	"list":
        [
			{
				"id":"经销商的id",
				"name" : "经销商名称",
				"email" : "邮箱地址",
				"phone" : "手机",
				"address":"联系地址",
				"status":"经销商状态",
				"dealer_code":"自身的经销商代码",
				"upper_dealer_code":"上级经销商代码",
				"create_time":"创建时间"
			}
        ]
	}

	
| 字段	| 是否必须 | 描述 |
| ----	| ----	| ---- |
| id | 是 | 经销商的id |
| name | 是 | 经销商名称 |
| email | 是 |	邮箱地址|
| phone | 是 | 手机 |
| address | 是 | 联系地址 |
| status | 是 | 经销商的状态，详细参见附录[<经销商状态>](#dealerStatusType) |
| dealer_code | 是 | 自身的经销商代码 |
| upper_dealer_code | 是 | 上级经销商代码 |


### **<a name="dealer_auth">6.经销商登陆认证</a>**


**Request**
URL

	POST /v2/dealer_auth

Header

	Content-Type:"application/json"

Content

	{
		"corp_id":"企业ID",
    	"account":"手机号/邮箱地址",
    	"password":"登陆密码"
	}

字段 | 是否必须 | 描述
---- | ---- | ----
corp_id | 是	 | 企业ID
account | 是 | 可用手机或邮箱进行登录。
password | 是 | 登陆认证密码

**Response**

Header

	HTTP/1.1 200 OK

Content

	{
    	"dealer_id":"经销商ID",
    	"access_token":"调用凭证",
    	"refresh_token":"刷新凭证",
    	"expire_in":"有效期（秒）"
	}

字段 | 是否必须 | 描述
----- | ---- | ----
dealer_id | 是 | 经销商ID
access_token | 是 | RESTful接口调用凭证
refresh_token| 是 | RESTful接口刷新凭证
expire_in | 是 | 调用凭证和刷新凭证的有效时间，单位：秒 


### **<a name="dealer_refresh_token">7.经销商刷新凭证</a>**


注：如果凭证超过了有效期，无法刷新凭证，只能重新进行[登陆认证](#dealer_auth)

**Request**

URL

	POST /v2/dealer/token/refresh

Header

	Content-Type:"application/json"
	Access-Token:"调用凭证"

Content
	{
    	"refresh_token":"刷新凭证"
	}

**Response**

Header

	HTTP/1.1 200 OK

Content

	{
    	"access_token":"新的调用凭证",
    	"refresh_token":"新的刷新凭证",
    	"expire_in":"有效期（秒）"
	}

字段 | 是否必须 | 描述
---- | ---- | ----
access_token | 是 | 新的调用凭证
refresh_token | 是 | 新的刷新凭证
expire_in | 是 | 有效期，单位：秒


### **<a name="get_dealer">9. 获取经销商详细信息</a>**

#### Request ####

*URL*

	GET /v2/dealer/{dealer_id}

*Header*

	Content-Type:"application/json"
	Access-Token:"Corp调用凭证"

*Content*
		
	无

#### Response ####

*Header*

	HTTP/1.1 200 OK

*Content*

	{
		"id":"经销商的id",
		"name" : "经销商名称",
		"email" : "邮箱地址",
		"phone" : "手机",
		"address":"联系地址",
		"status":"经销商状态",
		"dealer_code":"自身的经销商代码",
		"upper_dealer_code":"上级经销商代码",
		"create_time":"创建时间"
	}

	
| 字段	| 是否必须 | 描述 |
| ----	| ----	| ---- |
| id | 是 | 经销商的id |
| name | 是 | 经销商名称 |
| email | 是 |	邮箱地址|
| phone | 是 | 手机 |
| address | 是 | 联系地址 |
| status | 是 | 经销商的状态，详细参见附录[<经销商状态>](#dealerStatusType) |
| dealer_code | 是 | 自身的经销商代码 |
| upper_dealer_code | 是 | 上级经销商代码 |
| create_time | 是 | 经销商的创建时间 |

### **<a name="get_dealer_by_code">10. 通过经销商代码获取经销商信息</a>**

#### Request ####

*URL*

	GET /v2/dealer/dealer_code/{dealer_code}

*Header*

	Content-Type:"application/json"
	Access-Token:"Corp调用凭证"

*Content*
		
	无

#### Response ####

*Header*

	HTTP/1.1 200 OK

*Content*

	{
		"id":"经销商的id",
		"name" : "经销商名称",
		"email" : "邮箱地址",
		"phone" : "手机",
		"address":"联系地址",
		"status":"经销商状态",
		"dealer_code":"自身的经销商代码",
		"upper_dealer_code":"上级经销商代码",
		"create_time":"创建时间"
	}

	
| 字段	| 是否必须 | 描述 |
| ----	| ----	| ---- |
| id | 是 | 经销商的id |
| name | 是 | 经销商名称 |
| email | 是 |	邮箱地址|
| phone | 是 | 手机 |
| address | 是 | 联系地址 |
| status | 是 | 经销商的状态，详细参见附录[<经销商状态>](#dealerStatusType) |
| dealer_code | 是 | 自身的经销商代码 |
| upper_dealer_code | 是 | 上级经销商代码 |
| create_time | 是 | 经销商的创建时间 |

# 附录

### **<a name="dealerStatusType">1.经销商状态</a>**

枚举值 | 说明
---- | ----
0 | 停用
1 | 可用


