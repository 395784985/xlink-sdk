©2016  **云智易**物联云平台（http://www.xlink.cn）

# 消息群发接口

	本文档用于设置消息群发接口说明。

# **接口概览**
1. [及时消息群发](#BroadcastImmediately)
2. [附录](#appendix)


# **接口详情**


### **<a name="BroadcastImmediately">1.及时消息群发</a>**

	在后台产生群发任务后,立即发送,若用户不在线则等到用户上线时再次重发。

**Request**

URL

	POST /v2/broadcast/immediately

Header

	Content-Type:"application/json"

Content

	{
		"title":"标题",
		"content":"推送内容",
		"expired_time":"过期时间",
		"msg_type":"消息类型",
		"dest_type":"消息目标类型",
		"tags":["标签1","标签2"],
		"user_ids":[userId, userId],
		"action_type":"动作类型",
		"url":"点击时指向地址",
		"command":"点击时动作指令"
	}

字段 | 是否必须 | 描述
---- | ---- | ----
title | 是 | 消息标题
content | 是 | 消息内容
expired_time | 否 | 过期时间,yyyy-MM-dd'T'HH:mm:ss.SS'Z'
msg_type | 是 | 消息文本类型, 见[附录](#role_type)
dest_type | 是 | 消息目标类型, 见[附录](#dest_type)
tags | 否 | 用户标签,多个标签时是与关系,dest_type为2时才有
user_ids | 否 | 用户id,dest_type为3时才有
action_type | 是 | 消息动作类型,见[附录](#action_type)
url | 否 | 用户点击时打开url, action_type为1才有
command | 否 | 用户点击时执行动作命令, action_type为2才有

**Response**

Header

	HTTP/1.1 200 OK

Content
	
	无


## **<a name="appendix">附录</a>**

<a name="msg_type">**消息文本类型**</a>

枚举值 | 说明
---- | ----
1 | Txt文本

<a name="dest_type">**消息目标类型**</a>

枚举值 | 说明
---- | ----
1 | 企业下所有用户,All
2 | 企业下标签用户,Tags
3 | 企业下指定用户,Users

<a name="action_type">**消息动作类型**</a>

枚举值 | 说明
---- | ----
1 | 用户点击时打开,url
2 | 用户点击时执行动作,command